/* Base */
:root{
  --bg:#2f2724;
  --card:#3a2f2b;
  --ink:#f5efe8;
  --muted:#cfc4bb;
  --accent:#b48c5a;
  --line:#4a403b;
  --chip:#524640;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
.wrap{max-width:1100px;margin:0 auto;padding:0 18px}
.hero{background:linear-gradient(180deg,#3a2f2b, #2f2724)}
.hero .wrap{padding:36px 18px 18px}
h1{font-family:"Playfair Display",serif;font-size:44px;letter-spacing:.2px;margin:0 0 4px}
.tag{margin:2px 0 10px 0;color:var(--muted);font-weight:600}
.sub{margin:0;color:#e6ded5}
h2{margin:0 0 8px 0;font-size:20px}
p{line-height:1.5}

/* Panels */
.panel{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;margin:16px 0;box-shadow:0 8px 22px rgba(0,0,0,.25)}
.panel.controls{display:flex;flex-wrap:wrap;gap:18px;align-items:center}
.control-group{display:flex;gap:10px;align-items:center}
.control-group label{color:var(--muted);font-size:13px}

.chips{display:flex;gap:8px;flex-wrap:wrap;max-height:120px;overflow:auto}
.chip{background:var(--chip);color:var(--ink);border:1px solid var(--line);padding:6px 10px;border-radius:999px;font-size:13px;cursor:pointer;user-select:none}
.chip.on{outline:2px solid var(--accent)}

.toggle{display:inline-flex;border:1px solid var(--line);border-radius:10px;overflow:hidden}
.toggle button{background:transparent;border:none;color:var(--ink);padding:6px 12px;cursor:pointer}
.toggle button.on{background:var(--accent);color:#201712;font-weight:700}

.two-col{display:grid;grid-template-columns:1fr;gap:16px}
@media(min-width:880px){.two-col{grid-template-columns:420px 1fr}}

.hint{color:var(--muted);margin:8px 2px 0 2px}

/* Receipt card */
.receipt-card{background:#fff;color:#231b17;border-radius:12px;padding:18px 18px;position:relative;border:1px solid #eee;box-shadow:0 10px 30px rgba(0,0,0,.30)}
.receipt-card:after{content:"";position:absolute;left:0;right:0;bottom:-10px;height:10px;background:repeating-linear-gradient(-45deg,transparent 0 8px,#fff 8px 16px)}
.r-head{font-weight:800;text-align:center;font-size:20px}
.r-sub{color:#7b6f65;text-align:center;margin:-2px 0 8px 0}
.r-line{border-top:1px dashed #d7cfc9;margin:10px 0}
.r-row{display:flex;justify-content:space-between;align-items:center;margin:6px 0;font-variant-numeric:tabular-nums}
.r-row .pill{background:#efe7df;color:#6e5e53;border-radius:999px;padding:2px 8px;font-size:12px;margin-left:8px}
.r-row.active strong{color:#000}
.r-row.dim{opacity:.45}

/* Donut */
.viz{height:520px;width:100%}
svg{width:100%;height:100%}
.slice-label{fill:#fff;font-weight:800;pointer-events:none}
.arc{stroke:#2b2421;stroke-width:1}
.tooltip{position:fixed;pointer-events:none;background:#111;color:#fff;padding:6px 8px;border-radius:6px;font-size:12px;box-shadow:0 4px 12px rgba(0,0,0,.25)}

/* Legend-like chips for price tiers */
.price-legend{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 0 0}
.legend-item{display:flex;align-items:center;gap:6px;background:#4a403b;border:1px solid var(--line);padding:4px 10px;border-radius:999px;font-size:13px}
.swatch{width:12px;height:12px;border-radius:3px;background:#666}
.legend-item.dim{opacity:.4}

/* Footer */
.foot{color:var(--muted);margin:24px 0 34px}

.axis {
    font: 12px sans-serif;
}

#gdpChart {
    height: 70vh;
    width: 100%;
}

#exportMap {
    height: 70vh;
    width: 100%;
}

.legend-text {
    fill: white;
    font-size: 12px;
}

.tooltip {
    position: absolute;
    text-align: center;
    width: 10%;
    height: 5vh;
    padding: 0;
    font: 12px sans-serif;
    color: black;
}

/* LANDING HERO */
.hero-section {
    position: relative;
    height: 100vh;
    background: #2F2725 url('../assets/landing-hero-bg.png');
    background-position-x: center;
    background-position-y: center;
    background-repeat: no-repeat;
    background-size: cover;

    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.overlay {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem
}

.hero-content {
    position: relative;
    padding: 2.5rem 3rem;
    background: #6e5e53;
    border-radius: 16px;
}

.hero-title {
    margin-bottom: 1rem;
}

.hero-subtitle {
    margin-bottom: 2rem;
}

.decor-line {
    width: 20em;
    height: .25em;
    background: #c49a6c;
    margin: auto;
    margin-bottom: 1rem;
    border-radius: 2px;
}

.btn {
    background: #c49a6c;
    color: white;
    padding: 0.75rem 1.5rem;
    text-decoration: none;
    border-radius: 50px;
    transition: background 0.3s ease;
}

.btn:hover {
    background: #a57b53;
}

.decor {
    position: absolute;
}

.tea-leaves-hero {
    top: 0;
    right: 0;
    width: 25%;
    animation: slideInTopRight 1s forwards;
}

.mate-hero {
    bottom: 0;
    left: 0;
    width: 25%;
    animation: slideInBottomLeft 1s forwards;
}

@keyframes slideInTopRight {
    0% {
        opacity: 0;
        transform: translate(100%, -100%);
    }
    100% {
        opacity: 1;
        transform: translate(0, 0);
    }
}

@keyframes slideInBottomLeft {
    0% {
        opacity: 0;
        transform: translate(-100%, 100%);
    }
    100% {
        opacity: 1;
        transform: translate(0, 0);
    }
}


/*HOOK SECTION*/

#hook-section {
    position: relative;
    height: 100vh;
    padding: 6rem 20rem;
    text-align: center;
    background: #2F2725
}

.intro-text {
    padding-bottom: 1rem;
    transition: all 0.6s ease;
}

#find-out-btn{
    margin-top: 2rem;
}

.card-text{
    font-size: 1.2rem;
}

.type-of-caffeine-cards {
    display: flex;
    padding-top: .5em;
    justify-content: center;
    text-align: center;
    opacity: 0;
    transform: translateY(50px);
    transition: all 0.8s ease;
    overflow: visible;
}

.type-of-caffeine-cards.visible {
    opacity: 1;
    transform: translateY(0);
}

.hook-answer {
    opacity: 0;
    transition: opacity 0.6s ease;
}

.hook-answer.visible {
    opacity: 1;
}

.card {
    position: relative;
    background: #6e5e53;
    border-radius: 16px;
    padding-top: 8rem;
    width: 25rem;
    height: 30rem;
    margin: 2rem;
    text-align: center;
    transition: transform 0.3s ease;
}

.card-description {
    position: absolute;
    bottom: 6rem;
    width: 100%;
    text-align: center;
    padding: 1.5rem;
}

.card img {
    height: auto;
    margin-bottom: 1rem;
    object-fit: contain;

}

#tea-leaves{
    width: 90%;
    margin-top: -50%;
}

#cao-cao{
    margin-top: -70%;
    width: 115%;
}

#coffee-beans{
    margin-top: -75%;
    width: 80%;
}

.card p {
    font-size: 1rem;
}

/* Timeline */
/* Tight timeline container */
.viz-tight {
    max-width: 820px;
    height: 260px;
    margin: 0 auto;
    width: 100%;
}

/* Story window layout */
.tlw .tlw-wrap{
    display:grid; grid-template-columns:200px 1fr; gap:18px;
    max-width:980px; margin:0 auto; align-items:stretch;
    height:80vh; /* window height */
}

.tlw-left{ position:relative; }
#tlw-svg{ width:100%; height:100%; display:block; }

.tlw-right{
    position:relative;
    height:100%;
    overflow-y:auto;
    scroll-snap-type:y mandatory;
    border-radius:12px;
}

.tlw-slide{
    height:80vh;                   /* one slide per viewport */
    scroll-snap-align:start;
    display:flex; align-items:center;
    padding:24px;
}
.tlw-card{
    width:100%;
    background:#4a403b; border:1px solid var(--line); border-radius:14px;
    box-shadow:0 12px 28px rgba(0,0,0,.22);
    padding:18px 20px;
}
.tlw-card .badge{ display:inline-block; font-size:12px; font-weight:800;
    background:var(--chip); color:var(--ink); padding:3px 10px; border-radius:999px; margin-bottom:8px;
}
.tlw-card h3{ margin:0 0 8px 0; font-size:20px; }
.tlw-card p{ margin:0; color:var(--muted); line-height:1.5; }

.tlw-controls{ display:flex; gap:10px; justify-content:center; margin-top:10px; }
.tlw-controls button{
    background:var(--accent); color:#201712; border:none; border-radius:999px;
    padding:6px 12px; font-weight:700; cursor:pointer;
}
.tlw-controls button:hover{ filter:brightness(0.95); }

/* Left spine */
.tlw-axis{ stroke:var(--line); stroke-width:3; }
.tlw-dot{ fill:var(--chip); stroke:#2b2421; stroke-width:1; }
.tlw-year{ fill:var(--muted); font-size:12px; text-anchor:end; }
.tlw-dot.active{ fill:var(--accent); }
.tlw-year.active{ fill:var(--ink); font-weight:800; }

/* Story window card with image */
.tlw-card{
    display:grid;
    grid-template-columns: 1.1fr 1.6fr; /* image / text */
    gap:18px;
}

.tlw-media{
    position:relative;
    overflow:hidden;
    border-radius:12px;
    background:#2b2421;
    aspect-ratio: 16 / 10;      /* keeps consistent height; works in modern browsers */
}
.tlw-media img{
    width:100%; height:100%; object-fit:cover;
    transform: scale(1.02);
    opacity: 0; transition: opacity .35s ease, transform .6s ease;
}
.tlw-media img.is-loaded{ opacity: 1; transform: scale(1); }

.tlw-text .credit{
    margin-top:8px; font-size:11px; color:var(--muted); opacity:.75;
}

/* Mobile: stack image above text */
@media (max-width: 820px){
    .tlw-card{ grid-template-columns:1fr; }
    .tlw-media{ aspect-ratio: 16 / 9; }
}



.story-text {
    color: rgba(255, 255, 255, 0.88);
    font-size: 1.25rem;
    line-height: 1.8;
    max-width: 800px;
    margin: 5rem auto;
    text-align: center;
    font-family: 'Inter', sans-serif;
}

.story-text strong {
    color: #fff;
}

/* ENDING */
#ending-hero {
    position: relative;
    height: 100vh;
    background: #2F2725;
    background-position-x: center;
    background-position-y: center;
    background-repeat: no-repeat;
    background-size: cover;

    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.ending-content {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem
}

.vector-leaves-end {
    top: 0;
    right: 0;
    width: 25%;
}

.vector-leaves-end {
    top: 0;
    right: -3%;
    width: 25%;
}

.vector-leaves-end-2 {
    bottom: 0;
    left: -5%;
    width: 25%;
    rotate: 145deg;
}

.vector-line-end {
    bottom: 0;
    right: 0;
    width: 15%;
}

.vector-line-end-2 {
    top: 0;
    left: 0;
    width: 15%;
}